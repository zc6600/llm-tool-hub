
### Chapter 2: Path and Dependency Management

This chapter addresses the common `ModuleNotFoundError` and establishes protocols for managing project dependencies.

#### 2.1 Resolving `ModuleNotFoundError` (The Path Problem)

When running tests or scripts from outside the `src/` directory (e.g., in `tests/` or a main script), Python often cannot find `import package_name`.

**The Solution: Editable Install**

* **Command:** Run `pip install -e .` from the project root.
* **Mechanism:** This command links your current source directory directly into the Python environment's path, allowing for clean, absolute imports like `from llm_tool_hub.base_tool import BaseTool`.
* **Benefit:** Changes to the source code take effect immediately without reinstallation.

#### 2.2 Configuring `pytest` for `src` Layout

Even after an editable install, `pytest` may still need guidance on where to look for source code.

**The Solution: Explicit `pythonpath` in `pyproject.toml`**

Add the following configuration to explicitly include the `src` directory in the test runner's import path:

**Ini, TOML**

```
[tool.pytest.ini_options]
# Ensures that 'pytest' can resolve imports relative to the 'src' directory.
pythonpath = ["src"] 
```

#### 2.3 Dependency Separation Protocol

Dependencies must be strictly separated based on their function:

| **Dependency Type** | **Used By**                                    | **Configuration Location**        | **pip Installation**        |
| ------------------------- | ---------------------------------------------------- | --------------------------------------- | --------------------------------- |
| **Runtime**         | The deployed library code (e.g.,`ReadFileTool`).   | `[project].dependencies`              | `pip install package-name`      |
| **Development**     | The developers (e.g., running tests, linting, docs). | `[project.optional-dependencies].dev` | `pip install package-name[dev]` |

**Principle:** Never list development tools (like `pytest`) in the main `[project].dependencies`, as this unnecessarily increases the footprint for end-users.
